-- 0002_partitions.tmpl.sql
USE `__DB_NAME__`;

ALTER TABLE `crypto_bars`
PARTITION BY RANGE COLUMNS (ts) (
  PARTITION p2024_09 VALUES LESS THAN ('2024-10-01 00:00:00'),
  PARTITION p2024_10 VALUES LESS THAN ('2024-11-01 00:00:00'),
  PARTITION p2024_11 VALUES LESS THAN ('2024-12-01 00:00:00'),
  PARTITION p2024_12 VALUES LESS THAN ('2025-01-01 00:00:00'),
  PARTITION p2025_01 VALUES LESS THAN ('2025-02-01 00:00:00'),
  PARTITION p2025_02 VALUES LESS THAN ('2025-03-01 00:00:00'),
  PARTITION p2025_03 VALUES LESS THAN ('2025-04-01 00:00:00'),
  PARTITION p2025_04 VALUES LESS THAN ('2025-05-01 00:00:00'),
  PARTITION p2025_05 VALUES LESS THAN ('2025-06-01 00:00:00'),
  PARTITION p2025_06 VALUES LESS THAN ('2025-07-01 00:00:00'),
  PARTITION p2025_07 VALUES LESS THAN ('2025-08-01 00:00:00'),
  PARTITION p2025_08 VALUES LESS THAN ('2025-09-01 00:00:00'),
  PARTITION pmax     VALUES LESS THAN (MAXVALUE)
);

ALTER TABLE `equity_bars`
PARTITION BY RANGE COLUMNS (ts) (
  PARTITION p2024_09 VALUES LESS THAN ('2024-10-01 00:00:00'),
  PARTITION p2024_10 VALUES LESS THAN ('2024-11-01 00:00:00'),
  PARTITION p2024_11 VALUES LESS THAN ('2024-12-01 00:00:00'),
  PARTITION p2024_12 VALUES LESS THAN ('2025-01-01 00:00:00'),
  PARTITION p2025_01 VALUES LESS THAN ('2025-02-01 00:00:00'),
  PARTITION p2025_02 VALUES LESS THAN ('2025-03-01 00:00:00'),
  PARTITION p2025_03 VALUES LESS THAN ('2025-04-01 00:00:00'),
  PARTITION p2025_04 VALUES LESS THAN ('2025-05-01 00:00:00'),
  PARTITION p2025_05 VALUES LESS THAN ('2025-06-01 00:00:00'),
  PARTITION p2025_06 VALUES LESS THAN ('2025-07:01 00:00:00'),
  PARTITION p2025_07 VALUES LESS THAN ('2025-08-01 00:00:00'),
  PARTITION p2025_08 VALUES LESS THAN ('2025-09-01 00:00:00'),
  PARTITION pmax     VALUES LESS THAN (MAXVALUE)
);

ALTER TABLE `commodity_bars`
PARTITION BY RANGE COLUMNS (ts) (
  PARTITION p2024_09 VALUES LESS THAN ('2024-10-01 00:00:00'),
  PARTITION p2024_10 VALUES LESS THAN ('2024-11-01 00:00:00'),
  PARTITION p2024_11 VALUES LESS THAN ('2024-12-01 00:00:00'),
  PARTITION p2024_12 VALUES LESS THAN ('2025-01-01 00:00:00'),
  PARTITION p2025_01 VALUES LESS THAN ('2025-02-01 00:00:00'),
  PARTITION p2025_02 VALUES LESS THAN ('2025-03-01 00:00:00'),
  PARTITION p2025_03 VALUES LESS THAN ('2025-04-01 00:00:00'),
  PARTITION p2025_04 VALUES LESS THAN ('2025-05-01 00:00:00'),
  PARTITION p2025_05 VALUES LESS THAN ('2025-06-01 00:00:00'),
  PARTITION p2025_06 VALUES LESS THAN ('2025-07-01 00:00:00'),
  PARTITION p2025_07 VALUES LESS THAN ('2025-08-01 00:00:00'),
  PARTITION p2025_08 VALUES LESS THAN ('2025-09-01 00:00:00'),
  PARTITION pmax     VALUES LESS THAN (MAXVALUE)
);

ALTER TABLE `fx_bars`
PARTITION BY RANGE COLUMNS (ts) (
  PARTITION p2024_09 VALUES LESS THAN ('2024-10-01 00:00:00'),
  PARTITION p2024_10 VALUES LESS THAN ('2024-11-01 00:00:00'),
  PARTITION p2024_11 VALUES LESS THAN ('2024-12-01 00:00:00'),
  PARTITION p2024_12 VALUES LESS THAN ('2025-01-01 00:00:00'),
  PARTITION p2025_01 VALUES LESS THAN ('2025-02-01 00:00:00'),
  PARTITION p2025_02 VALUES LESS THAN ('2025-03-01 00:00:00'),
  PARTITION p2025_03 VALUES LESS THAN ('2025-04-01 00:00:00'),
  PARTITION p2025_04 VALUES LESS THAN ('2025-05-01 00:00:00'),
  PARTITION p2025_05 VALUES LESS THAN ('2025-06-01 00:00:00'),
  PARTITION p2025_06 VALUES LESS THAN ('2025-07-01 00:00:00'),
  PARTITION p2025_07 VALUES LESS THAN ('2025-08-01 00:00:00'),
  PARTITION p2025_08 VALUES LESS THAN ('2025-09-01 00:00:00'),
  PARTITION pmax     VALUES LESS THAN (MAXVALUE)
);
